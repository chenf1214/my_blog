---
title: http 专题
tags:
 - tag4
categories: 
 - js
---

### tcp Transmission control protocol 和 udp User datagram protocol  区别
tcp 是面向链接的，可靠的，基于字节流的传输协议
udp 面向无连接的传输层协议

## tcp 滑动窗口
tcp 的滑动窗口分为2种， 发送窗口和接收窗口

发送窗口

先说一下发送端的窗口结构

- 1.已发送，已确认
- 2.已发送，未确认
- 3.未发，但是能发
- 4.未发，但是也不能发

2和3是发送窗口，3是其中的可用窗口

流量控制
发送 接收 200都
先发100
收到后 由于负载处理不了，处理40， 60方缓冲区
告诉发送，我这边之后只能处理140了
发送端调整 窗口为140，并且snd.una向后移40

## tcp 拥塞控制
拥塞窗口
慢启动阈值

接收窗口是接收端给的限制
拥塞窗口是给发送端的限制

限制谁
限制 发送窗口 大小

发送窗口实际大小 min（rwnd，cwnd）

拥塞控制涉及几个算法
- 慢启动
- 拥塞避免
- 快速重传和快速恢复

## 慢启动
慢慢传，尽量保守点

首先三次握手，宣告自己的接收窗口的大小

双方初始化拥塞窗口大小

发送端 每收到一个ack，拥塞窗口 +1 
也就是每经过一个rtt， cwnd翻倍

假设第一轮10个报文，传完了且收到了ack后 cwnd变为20
再一轮 40
80

别急，肯定不能一直长大，会有个阈值，之后就是 拥塞避免出手了

### 拥塞避免

不长这么快了，让每一轮真的只 +1
也就是收到个ack 增加 1/cwnd
当然其实， 拥塞避免和慢启动其实是一起作用的

## 快速重传和快速恢复


## http 1.1如何解决队头阻塞问题
http 传输是基于 请求-应答 模式的，是串行的
也就是说一个请求的应答慢了，后面的都堵着

## 并发链接
一个域名允许分配多个链接，相当于多了任务多列
rfc官方的规定其实是最多并发 2 个，但是像chrom这种浏览器实现了 6 个

## 域名分片
多分几个2级域名，那就不止6个了

## http2.0有哪些改动
头部压缩

多路复用
http队头阻塞
二进制分帧


